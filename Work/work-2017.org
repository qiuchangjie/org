* 一起来飞车工作记录
** UWA反馈的性能问题
*** TODO Texture占用的内存过大
*** TODO 纹理重复
*** TODO 大部分赛道中物理性能耗时过长
*** TODO 开启了反走样，比较耗性能
*** TODO 半透明比上个版本多
*** TODO SkinMesh比赛中跳变
*** TODO 堆内存分配较高
** 问题记录
*** DONE 地图AssetBundle可能重复加载了，分别在SceneCommonRace.LoadScene和RaceManager.LoadStart
CLOSED: [2017-02-02 Thu 11:59]
*** DONE 影子回放抖动（原因：没有设置Rigibody的FreezeRotation）
CLOSED: [2017-02-02 Thu 16:54]
*** DONE AI赛车竖立（原因：因为赛车碰撞盒子坐标被偏移，导致重心偏移）
CLOSED: [2017-02-02 Thu 16:55]
*** DONE 赛车车身碰撞体被缩小，导致AI回放弹簧组件SpringJoint和车轮相互力不平衡，AI一直抖动
CLOSED: [2017-02-06 Mon 10:51]
*** DONE 修复传送带落地时有概率撞地弹起
CLOSED: [2017-03-31 Fri 11:37]
*** DONE fixed点击第二个氮气踩加速带叠加氮气时间
CLOSED: [2017-03-31 Fri 11:38]
*** DONE WWW下载过程还没结束的情况下调用dispose会有一定概率卡死（下载模块出现卡死是因为这个原因）
CLOSED: [2017-05-18 Thu 15:35]
*** DONE 同步包发送速度值的时候使用的是16位，精度不够溢出，导致速度值超过一定值变成负数
CLOSED: [2017-05-18 Thu 15:36]


** UWA反馈的性能问题 <2017-02-17 Fri>
*** 测试机型红米2
*** Mono内存建议保持40MB以下
*** 一个协程加载多个资源，减少空白时间
*** 比赛中AnimationClip较多
*** 例子系统个数多，实际使用的数量很少
*** UI切换高于100MS会感觉有明显的卡顿（目前版本只有背包，其它没问题）
*** 比赛的时间建议使用图片字体
*** MeshCollider覆盖面积重叠
*** 赛道里面的一些碰撞物体简化碰撞体，不要用MeshCollider
*** 调整代码目录提高代码编译速度
*** BuildReport

** Unity5.3 优势
*** 多线程渲染
*** 粒子系统在子线程
*** Mecanim动画

** 情侣赛开发
*** DONE 道具赛和竞速赛合并，比赛中分道具方和竞速方
CLOSED: [2017-03-10 五 10:22]
*** DONE 花车逻辑，双方同时触发丘比特氮气，能释放花车
CLOSED: [2017-03-10 五 10:22]
*** DONE LoveShow逻辑，双方在规定时间内点击按钮，能释放LoveShow
CLOSED: [2017-03-10 五 10:22]
*** DONE 背景音乐打包能自动删除旧背景音乐
*** TODO 情侣赛会卡死（怀疑是花车查找AI路径点死循环)

** 警匪赛开发
*** DONE 警匪任务逻辑
CLOSED: [2017-06-01 Thu 15:30]
*** DONE 赛车耐久度逻辑
CLOSED: [2017-06-17 Sat 10:23]
*** DONE 通缉星级逻辑
CLOSED: [2017-06-20 Tue 14:20]
*** DONE 警匪任务UI
CLOSED: [2017-06-20 Tue 14:20]
*** DONE 赛车耐久度UI
CLOSED: [2017-06-20 Tue 14:21]
*** DONE 通缉星级UI
CLOSED: [2017-06-20 Tue 14:21]
*** DONE 玩家处于抓捕区域中，其它玩家被隐藏，而且在这段时间内通过终点，同步是否会有问题？（玩家通过终点后不发同步包）
CLOSED: [2017-06-17 Sat 10:23]
*** DONE 3D摄像机中的UI适配，通过摄像机发射线的确定位置，然后设置UI对象的位置来适配
CLOSED: [2017-06-03 Sat 17:22]
*** DONE 警车提示小图标（警车在玩家后面时，在屏幕下方要出现小图标标识警车的方位）功能制作：通过3D摄像机把警车世界坐标转换成屏幕坐标，得到屏幕坐标后再转换成2D摄像机的世界坐标，再由世界坐标转换成UI节点的对象坐标
CLOSED: [2017-06-17 Sat 10:28]
*** DONE 警车（或者花车）加载AI文件有可能会失败，通过查看代码，初步推断应该是CarView起的协程被干掉了（可能是CarView在某个时机被disable掉导致的），导致AI文件没有加载完，处理方法：从外部传入RaceView进行启动协程加载AI文件
CLOSED: [2017-06-28 三 11:09]
*** DONE 经过警告点创建障碍物，会出现卡顿，经分析，每创建一个新障碍物，unity会尝试合并DrawCall，导致渲染性能开销增大，处理方法：比赛前一次加载完所有障碍物
CLOSED: [2017-06-28 三 11:09]
*** TODO 警匪相关的运营活动功能开发
*** TODO 警车AI会偶尔出现速度非常快

** OB系统开发
*** DONE UI实现
CLOSED: [2017-04-18 Tue 22:41]
*** DONE OB系统逻辑
CLOSED: [2017-04-18 Tue 22:42]

** 优化记录
*** DONE 道具盒离玩家赛车距离较远时隐藏
CLOSED: [2017-03-26 Sun 22:06]
*** DONE 加速带离玩家赛车的距离较远时隐藏
CLOSED: [2017-03-26 Sun 22:06]
*** DONE 去掉其它玩家，AI跟空气墙的碰撞检测
CLOSED: [2017-03-26 Sun 22:07]
*** DONE 比赛中碰撞对Number Of Contacts较多：合并地面网格碰撞体，合并空气墙碰撞体（既整个赛道就一个地面，一个空气墙），单辆车能稳定保持在6个碰撞数，不会出现数量跳动大的问题
CLOSED: [2017-03-26 Sun 22:12]
*** DONE 装扮上的特效做了档位适配
CLOSED: [2017-03-26 Sun 22:39]
*** DONE 道具小窗口显示效率优化(换成卡通形式)
CLOSED: [2017-03-31 Fri 11:36]
*** DONE 传送带QTE同步优化
CLOSED: [2017-04-18 Tue 22:42]
*** DONE 漂移状态同步优化(EfState用三位表示所有漂移状态)
CLOSED: [2017-04-19 Tue 22:42]
*** DONE 组队氮气状态同步
CLOSED: [2017-04-23 Sun 15:13]
*** DONE 泰国风情地图全局灯光的CullingMask被设置成Everything，导致地图DrawCall飙升到300多，CullingMask设置成CarModel即可
CLOSED: [2017-04-29 Sat 14:23]
*** DONE RacerLOD实现比赛玩家LOD，比赛中其他玩家距离摄像机距离隐藏模型和特效
CLOSED: [2017-04-30 Sun 21:51]
*** DONE 抽离资源依赖的脚本（例如CarView等），通过实现一个CarViewHolder（继承ScriptableObject）可以把赛车prefab和赛车参数数据打到一个assetbundle里面
CLOSED: [2017-05-09 Tue 20:28]
*** DONE Assetbundle使用不压缩方式打资源，通过高压缩算法自己实现压缩功能（结论：通过不压缩方式打包assetbundle然后用压缩软件压缩，空间节省不大，可能用其它压缩算法会有提升）
CLOSED: [2017-05-09 Tue 20:31]
*** DONE 发现比赛结束后赛道资源没有释放干净，原因是：加载完赛道后，调用了Assetbundle.unload(false)没有释放干净，现在改成结束比赛后调用Assetbundle.unload(true)可以释放干净，但是由于bundle占用的内存在比赛中一直存在，所以内存峰值会比以前高10MB左右
CLOSED: [2017-05-12 Fri 10:30]
*** DONE 发现比赛结束后赛车资源没有释放干净，原因是：SocketCtrl有个回调加了RaceManager.OnConnectSuccess函数，比赛结束后没有减去该函数导致赛车资源一直处于引用的状态
CLOSED: [2017-05-14 Sun 01:02]
*** Camera.layerCullDistances可以设置不同层次的物体的摄像机裁剪距离
*** 粒子系统Render下有不同的RenderMode 渲染模式，可以达到合并DrawCall
*** TODO 整个游戏堆内存分配较高300KB每秒，待查明原因
*** TODO 游戏网络模块有不合法堆内存分配，MemoryStream，BinaryReader没有复用
*** TODO 胎痕位置可配置（目前胎痕跟随车轮碰撞体跟路面的接触点）
