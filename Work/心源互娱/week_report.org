#+TITLE: 2020-6-29 To 2020-7-4 Week Report

本周工作：
1. 开发无人炸弹飞机技能，功能已经开发完成，策划也验收过效果，后续有优化需求再进
   一步优化效果。[进度：100%]
2. 开发角色行走，摄像机跟随目标对象的功能，AI做预瞄准功能需要用到。[进度：100%]
3. 继续完善C#编码规范文档，规范代码风格，让代码看起来整洁统一。[进度：100%]
4. 编写Lua编码规范文档，统一Lua编码风格，按照以前的编码习惯写了1.0版本文档，后续有
   需要再继续完善补充。[进度：100%]
5. 整理工程代码，使用Unity的程序集定义功能。[进度：100%]

下周工作：
1. 开发AI行为树判断弹药数量功能。
2. 开发AI行为树装备弹药功能。
3. 整理重构战斗中的一些底层逻辑。
4. 帮忙解决组员遇到的技术问题。

本周心流：
1. 在整理工程时我打算把底层比较独立的代码使用Unity程序集定义，这样在修改代码的时
   候能提高编译速度，我发现我们同学写的一些代码相互调用关系不是很合理，上层的代
   码和底层的代码相互依赖调用， 本来底层的代码可以独立定义一个程序集，相互调用后
   就无法定义程序集，因为依赖了一些上层代码的类。我们把一些代码做了重构，使用事
   件通知的方式对一些类进行解耦。
2. 有位同学在开发战斗UI的时候，UI的消息回调没有被调用，他查消息系统代码，发现消
   息系统是通过弱引用的方式保存回调的，被GC后就回调对象就被回收了，他认为底层用
   弱引用是不合理的，想改掉，我认为底层用弱引用是相对更安全的做法，因为使用弱引
   用保存回调，即使监听回调忘记做手动移除了，消息系统也不会持有对象引用，回调对
   象的销毁不受消息系统影响，所以这样是降低了内存泄漏概率。
